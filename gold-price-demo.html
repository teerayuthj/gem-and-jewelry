<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Price Component Demo - Real API</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./assets/css/gold-price.css">
    <style>
        /* Additional custom styles */
        body {
            background-color: #E8F4FD;
            min-height: 100vh;
        }
        
        /* Loading animation */
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container mx-auto py-8">
        <!-- Language Switcher -->
        <div class="text-center mb-6">
            <button 
                id="langSwitcher" 
                class="bg-white text-gray-700 px-4 py-2 rounded-lg shadow-md hover:shadow-lg transition-shadow"
            >
                English
            </button>
        </div>

        <!-- Gold Price Component Container -->
        <div id="goldPriceContainer" class="gold-price-container">
            <!-- Real-time component will be rendered here -->
        </div>
    </div>

    <!-- Scripts -->
    <script src="./assets/js/i18n.js"></script>
    <script src="./assets/js/gold-price-manager.js"></script>
    <script src="./assets/js/thai-header-fix.js"></script>

    <script>
        // Debug console functionality
        function addDebugLog(message) {
            const console = document.getElementById('debugConsole');
            if (console) {
                const time = new Date().toLocaleTimeString();
                const logEntry = document.createElement('div');
                logEntry.textContent = `[${time}] ${message}`;
                console.appendChild(logEntry);
                console.scrollTop = console.scrollHeight;
            }
        }
        
        // Monitor API status
        setInterval(() => {
            if (window.goldPriceManager && window.goldPriceManager.realData) {
                const g965b = window.goldPriceManager.realData.G965B;
                if (g965b) {
                    addDebugLog(`Gold 96.5%: ${g965b.offer} THB (${g965b.time})`);
                }
            }
        }, 10000); // Log every 10 seconds
        
        // Override console.log to show in debug console
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            addDebugLog(args.join(' '));
        };
        
        // Component ready detection
        document.addEventListener('DOMContentLoaded', function() {
            addDebugLog('DOM loaded, initializing components...');
            
            setTimeout(() => {
                if (window.goldPriceManager) {
                    addDebugLog('Gold Price Manager initialized successfully');
                } else {
                    addDebugLog('Warning: Gold Price Manager not found');
                }
            }, 2000);
        });
    </script>
</body>
</html>